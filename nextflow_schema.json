{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://raw.githubusercontent.com/nf-core/process_sanger_lcm-nf/master/nextflow_schema.json",
  "title": "process_sanger_lcm-nf pipeline parameters",
  "description": "Pipeline for filtering LCM artifacts and germline mutations post LCMB. Contact Phuong at al35@sanger.ac.uk.",
  "type": "object",
  "defs": {
    "input_output_options": {
      "title": "Input/output options",
      "type": "object",
      "fa_icon": "fas fa-terminal",
      "description": "Define where the pipeline should find input data and save output data.",
      "required": [
        "samplesheet",
        "reference_genome",
        "outdir",
        "reference_genome_dict",
        "reference_genome_idx"
      ],
      "properties": {
        "samplesheet": {
          "type": "string",
          "description": "A file that contains paths to relevant files for the processes in the pipeline, with headers similar to demo_files/lcm_processing_input_indel.tsv for indels or demo_files/lcm_processing_input_snv.tsv for SNVs."
        },
        "reference_genome": {
          "type": "string",
          "description": "Path to the reference genome fasta file."
        },
        "reference_genome_dict": {
          "type": "string",
          "format": "file-path",
          "description": "Path to the *.dict file associated with the reference genome fasta file."
        },
        "reference_genome_idx": {
          "type": "string",
          "format": "file-path",
          "description": "Path to the *.idx file associated with the reference genome fasta file."
        },
        "with_match_normal": {
          "type": "boolean",
          "default": true
        },
        "outdir": {
          "type": "string",
          "format": "directory-path",
          "description": "The output directory where the results will be saved. You have to use absolute paths to storage on Cloud infrastructure.",
          "fa_icon": "fas fa-folder-open"
        },
        "help": {
          "type": "boolean",
          "description": "Return pipeline options and example command."
        }
      }
    },
    "conpair_options": {
      "title": "Conpair options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "conpair": {
          "type": "boolean",
          "default": true,
          "description": "Run Conpair?"
        },
        "marker_bed": {
          "type": "string",
          "description": "Path to the marker reference *.bed file used by Conpair."
        },
        "marker_txt": {
          "type": "string",
          "description": "Path to the marker reference *.txt file used by Conpair."
        },
        "concordance_threshold": {
          "type": "number",
          "default": 90.0,
          "description": "Threshold above which each sample and a matched normal are considered to be from the same individual (0-100)."
        },
        "contamination_threshold_samples": {
          "type": "number",
          "default": 0.3,
          "description": "Threshold above which a sample is considered contaminated (0-100)."
        },
        "contamination_threshold_match": {
          "type": "number",
          "default": 5.0,
          "description": "Threshold above which the sample is considered contaminated (0-100)."
        }
      }
    },
    "snv_filtering_options": {
      "title": "SNV filtering options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "filter_snv": {
          "type": "boolean",
          "default": true,
          "description": "Filter SNVs?"
        }
      }
    },
    "indel_filtering_options": {
      "title": "Indel filtering options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "filter_indel": {
          "type": "boolean",
          "default": true,
          "description": "Filter indels?"
        }
      }
    },
    "vcfilter_options": {
      "title": "vcfilter options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "vcfilter_config": {
          "type": "string",
          "description": "Pre-cgpVAF filtering. Defaults to data/indel_default.filter for Indels and data/snv_default.filter for SNVs."
        }
      }
    },
    "cgpvaf_options": {
      "title": "cgpVAF options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "high_depth_bed": {
          "type": "string",
          "description": "Path to a reference BED file of high depth regions for cgpVAF."
        }
      }
    },
    "phylogenetics_options": {
      "title": "Phylogenetics options",
      "type": "object",
      "description": "",
      "default": "",
      "properties": {
        "phylogenetics": {
          "type": "boolean",
          "default": true,
          "description": "Build a phylogenetic tree from the mutations?"
        },
        "with_topology": {
          "type": "string"
        },
        "phylogenetics_outdir_basename": {
          "type": "string"
        }
      }
    }
  },
  "allOf": [
    {
      "$ref": "#/defs/input_output_options"
    },
    {
      "$ref": "#/defs/conpair_options"
    },
    {
      "$ref": "#/defs/snv_filtering_options"
    },
    {
      "$ref": "#/defs/indel_filtering_options"
    },
    {
      "$ref": "#/defs/vcfilter_options"
    },
    {
      "$ref": "#/defs/cgpvaf_options"
    },
    {
      "$ref": "#/defs/phylogenetics_options"
    }
  ],
  "properties": {
    "singularity_cachedir": {
      "type": "string",
      "default": "/lustre/scratch126/casm/team154pc/at31/process_sanger_lcm-nf/singularity"
    }
  }
}
